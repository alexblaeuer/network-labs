---
provider: clab

plugin: [ multilab ]
defaults.multilab.id: 120

groups:
  routers:
    members: [router1, router2, router3]
    module: [ospf, vlan]
    vlan.mode: route
    config: no_cdp.j2
  switches:
    members: [switch1, switch2, switch3]
    module: [vlan, stp]
    vlan.mode: bridge
    stp:
      protocol: pvrst
    config: no_cdp.j2

nodes:
  router1:
    device: iol
    image: vrnetlab/cisco_iol:17.15.01
  router2:
    device: iol
    image: vrnetlab/cisco_iol:17.15.01
  router3:
    device: iol
    image: vrnetlab/cisco_iol:17.15.01
  switch1:
    device: ioll2
    image: vrnetlab/cisco_iol:L2-17.15.01
  switch2:
    device: ioll2
    image: vrnetlab/cisco_iol:L2-17.15.01
  switch3:
    device: ioll2
    image: vrnetlab/cisco_iol:L2-17.15.01

vlans:
  data:
    id: 10
  voice:
    id: 20
  video:
    id: 30

links:
  - group: wan_routed
    members:
    - router1:
      router2:
    - router2:
      router3:
    - router3:
      router1:
  - group: lan_routed
    ospf.passive: true
    members:
      - switch1:
        router1:
      - switch2:
        router2:
      - switch3:
        router3:
  - group: lan_switched
    vlan.trunk: [data, voice, video]
    members:
    - switch1:
      switch2:
